<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News & Updates | Dr. Sadek Mohsen Almaswari</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">Dr. Sadek <span>Almaswari</span></a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="education.html">Education</a></li>
                <li><a href="experience.html">Experience</a></li>
                <li><a href="practice.html">Practice</a></li>
                <li><a href="publications.html">Publications</a></li>
                <li><a href="awards.html">Awards</a></li>
                <li><a href="news.html" class="active">News</a></li>
                <li><a href="contact.html" class="btn-primary">Contact</a></li>
            </ul>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <header class="page-banner">
        <div class="container">
            <h1>News & Updates</h1>
            <p>The latest medical insights, clinic announcements, and health resources from Dr. Sadek.</p>
        </div>
    </header>

    <section class="news-section">
        <div class="container">
            
            <div id="news-container" class="news-grid">
                
                <div class="news-card skeleton">
                    <div class="skeleton-img"></div>
                    <div class="news-content">
                        <div class="skeleton-text short"></div>
                        <div class="skeleton-text title"></div>
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text"></div>
                    </div>
                </div>
                <div class="news-card skeleton">
                    <div class="skeleton-img"></div>
                    <div class="news-content">
                        <div class="skeleton-text short"></div>
                        <div class="skeleton-text title"></div>
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text"></div>
                    </div>
                </div>
                <div class="news-card skeleton">
                    <div class="skeleton-img"></div>
                    <div class="news-content">
                        <div class="skeleton-text short"></div>
                        <div class="skeleton-text title"></div>
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text"></div>
                    </div>
                </div>

            </div>

        </div>
    </section>

    <footer class="footer">
        <div class="container footer-grid">
            <div class="footer-brand">
                <a href="#" class="logo">Dr. Sadek <span>Almaswari</span></a>
                <p>Excellence in Otorhinolaryngology based in Saudi Arabia.</p>
            </div>
            <div class="footer-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="practice.html">Practice Areas</a></li>
                    <li><a href="publications.html">Publications</a></li>
                    <li><a href="news.html">News & Updates</a></li>
                </ul>
            </div>
            <div class="footer-copy">
                <p>&copy; 2026 Dr. Sadek Almaswari. <br>Crafted by <a href="https://asaasweb.com">asaasweb.com</a></p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const container = document.getElementById("news-container");
            const username = "alaaddinsadeq";
            const repo = "dr-sadek-portfolio";
            const url = `https://api.github.com/repos/${username}/${repo}/contents/posts`;

            try {
                // 1. Fetch the list of files
                const response = await fetch(url);
                if (!response.ok) throw new Error("No posts found or repository is private.");
                const files = await response.json();

                // Clear skeletons
                container.innerHTML = "";

                // Filter for markdown files and reverse to show newest first
                const mdFiles = files.filter(file => file.name.endsWith('.md')).reverse();

                if (mdFiles.length === 0) {
                    container.innerHTML = `<div class="empty-state"><h3>No news published yet.</h3><p>Check back later for updates from Dr. Sadek.</p></div>`;
                    return;
                }

                // 2. Fetch and parse each file's content
                for (let i = 0; i < mdFiles.length; i++) {
                    const file = mdFiles[i];
                    const fileRes = await fetch(file.download_url);
                    const fileText = await fileRes.text();

                    // Basic Frontmatter extraction (Decap CMS format)
                    const titleMatch = fileText.match(/title:\s*["']?(.*?)["']?\n/);
                    const dateMatch = fileText.match(/date:\s*["']?(.*?)["']?\n/);
                    
                    const title = titleMatch ? titleMatch[1] : file.name.replace('.md', '');
                    const rawDate = dateMatch ? dateMatch[1] : "";
                    
                    // Format Date nicely
                    const dateObj = new Date(rawDate);
                    const formattedDate = isNaN(dateObj) ? "Recent Update" : dateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

                    // Create Card HTML
                    const card = document.createElement("div");
                    card.className = "news-card fade-up-element";
                    
                    card.innerHTML = `
                        <div class="news-image">
                            <div class="abstract-bg"></div>
                        </div>
                        <div class="news-content">
                            <span class="news-date">${formattedDate}</span>
                            <h3 class="news-title">${title}</h3>
                            <a href="#" class="read-more">Read Full Post 
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </a>
                        </div>
                    `;

                    container.appendChild(card);

                    // Trigger staggered animation
                    setTimeout(() => {
                        card.classList.add('visible');
                    }, i * 150);
                }

            } catch (error) {
                console.error("Error loading news:", error);
                container.innerHTML = `<div class="empty-state"><h3>Unable to load news.</h3><p>Please try refreshing the page.</p></div>`;
            }
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 1. Mobile Menu Logic
            const mobileMenu = document.getElementById('mobile-menu');
            const navLinks = document.getElementById('nav-links');
            
            if (mobileMenu && navLinks) {
                mobileMenu.addEventListener('click', () => {
                    mobileMenu.classList.toggle('active');
                    navLinks.classList.toggle('active');
                });
            }

            // 2. Scroll Animation Logic
            const observerOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.fade-up-element').forEach(el => observer.observe(el));
        });
    </script>

</body>
</html>